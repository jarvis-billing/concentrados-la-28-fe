<!-- Modal -->
<div class="modal fade" id="orderModal" tabindex="-1" aria-labelledby="orderModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="orderModalLabel">Importar Orden</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="w-100 overflow-auto">

                    <form autocomplete="off" [formGroup]="formOrder" (ngSubmit)="searchorder()"
                        class="d-flex gap-2 mb-2">

                        <input class="form-control" type="text" placeholder="Buscar por numero de orden" formControlName="searchorder">

                        <button class="btn btn-primary" type="submit">Buscar</button>
                        <button class="btn btn-info" type="button" (click)="clearorderSearchField()">Limpiar</button>

                    </form>

                    <table class="table text-center" style="vertical-align: middle;">

                        <thead>
                            <tr class="table-primary">
                                <th scope="col">No. Orden</th>
                                <th scope="col">Cliente</th>
                                <th scope="col">Total Orden</th>
                                <th scope="col">Gestor de Ventas</th>
                                <th scope="col"></th>
                            </tr>

                        </thead>

                        <tbody>

                            @for (order of filteredListOrders; track $index) {

                            <tr class="">

                                <td>{{order.orderNumber}}</td>

                                @if (order.client && (order.client.name || order.client.surname)) {
                                    <td>{{order.client.name}} {{order.client.surname}}</td>
                                } @else {
                                    <td>{{order.client.nickname}}</td>
                                }                                
                                <td>{{order.totalOrder| currency:'$ ':'symbol':'.0-0'}}</td>
                                <td>{{order.creationUser?.name}} {{order.creationUser?.surname}}</td>
                                <td>
                                    <button type="button" class="btn btn-success" (click)="selectorder(order)">Seleccionar</button>
                                </td>
                            </tr>
                            }


                        </tbody>

                    </table>

                </div>
            </div>
            @if (filteredListOrders) {
                <div class="text-center mt-4 d-flex align-items-center justify-content-center">
                    <button class="btn btn-secondary mx-1" (click)="changePage(paginaActual - 1)" [disabled]="paginaActual === 1">Anterior</button>
                    <span>{{ paginaActual }} de {{ totalPaginas }}</span>
                    <button class="btn btn-secondary mx-1" (click)="changePage(paginaActual + 1)" [disabled]="paginaActual === totalPaginas">Siguiente</button>
                </div>
              }
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>